{% extends "base.html" %}

{% block extra_head %}
    <link rel="stylesheet" type="text/css" href="/static/slick/slick.css"/>
    <link rel="stylesheet" type="text/css" href="/static/slick/slick-theme.css"/>
    <script type="text/javascript" src="/static/slick/slick.min.js"></script>  
{% endblock %}

{% block content %}

    <div dir="rtl" style="margin: 0 25px;">

    <div class="slider">
      <div class="day">{{ today_html|safe }}</div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
      <div class="day"></div>
    </div>

    </div>

    <script>

        function load(offset) {
          var slick = $('.slider').slick('getSlick');
          var elem = $(slick.$slides[offset]).eq(0);
          elem.load('/day/?offset=' + offset);
        }

        $(function(){
          var n = $('.slider > .day').length - 1;
          $('.slider').slick({
            rtl: true,
            infinite: false,
            slidesToScroll: 1,
            slidesToShow: 3,
            responsive: [
              {
                breakpoint: 1200,
                settings: {
                  slidesToShow: 2,
                }
              },
              {
                breakpoint: 800,
                settings: {
                  slidesToShow: 1,
                }
              }
            ]            
          });

          load(1);
          load(2);
          
          $('.slider').on('beforeChange', function(event, slick, currentSlide, nextSlide) {
            load(nextSlide);
            load(nextSlide + 1);
            load(nextSlide + 2);
          });
        });
    </script>
{% endblock %}
